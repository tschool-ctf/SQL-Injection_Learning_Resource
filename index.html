<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SQL Injection 教學素材</title>
    <link rel="icon" href="icon.ico" type="image/x-icon">
    <!-- Material Icons -->
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <!-- Font Awesome for icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <!-- Noto Sans TC for Chinese text -->
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@300;400;500;700&display=swap">
    <style>
        /*
         * CSS 樣式表 - SQL Injection 教學素材
         * 作者：毛宇禾、賴永來、曾緯淳、李欣安 (臺北市數位實驗高中學生製作)
         * 描述：定義網頁的整體佈局、顏色、字體和響應式設計。
         */

        /* -- 顏色變數定義 -- */
        :root {
            --dark-gray-blue: #112438;
            --medium-gray-blue: #42566c;
            --light-gray-blue: #8497ac;
            --extra-light-gray-blue: #b8c2cd;
            --white: #ffffff;
            --black: #000000;
            --red-emphasis: #ff0000; /* 強調文字顏色 */
            --example-bg: #a9c8e3; /* 範例區塊背景 */
            --example-border: #0060d6; /* 範例區塊左邊線 */
            --code-green: #008000; /* 程式碼文字綠色 */
            --code-light-blue: #00bfff; /* 程式碼背景框線 */
            --ctf-box-bg: #c3d7f4; /* CTF 題目框背景 */
            --ctf-box-border: #0051ff; /* CTF 題目框邊線 */
            --ctf-command-color: #005eff; /* CTF 指令文字顏色 */
            --ctf-desc-color: #8c8c8c; /* CTF 敘述文字顏色 */
        }

        /* -- 基本樣式重置與字體設定 -- */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Noto Sans TC', sans-serif;
            background-color: #f0f2f5; /* 頁面整體背景色 */
            color: var(--black);
            line-height: 1.6;
        }

        /* 連結樣式 */
        a {
            text-decoration: none;
            color: inherit;
        }

        a:hover {
            opacity: 0.8;
        }

        /* -- 頁首區塊 (Header) -- */
        .header {
            background-color: var(--dark-gray-blue);
            height: 10vh; /* 頁首高度設定為視窗高度的 10% */
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 0 3%; /* 左右內邊距 */
            box-shadow: 0 2px 10px rgba(0,0,0,0.2); /* 頁首陰影 */
            z-index: 1000; /* 確保頁首在最上層 */
            position: sticky; /* 頁首固定在頂部 */
            top: 0;
        }

        .header-left h1 {
            color: var(--white);
            font-size: 2.2em; /* 標題字體大小 */
            font-weight: 700;
        }

        .header-right {
            display: flex;
            align-items: center;
            color: var(--extra-light-gray-blue);
            font-size: 0.95em;
        }

        .header-right .github-icon {
            color: var(--white);
            font-size: 1.8em;
            margin-left: 15px;
            transition: transform 0.2s ease-in-out; /* GitHub 圖徽懸浮動畫 */
        }

        .header-right .github-icon:hover {
            transform: scale(1.1);
        }

        /* -- 網頁內容區塊 (Content Wrapper) -- */
        .content-wrapper {
            display: flex;
            min-height: calc(100vh - 10vh - 15vh); /* 內容區塊高度 = 視窗高度 - 頁首高度 - 頁尾高度 */
            padding: 20px 3%; /* 內容區塊外邊距 */
            gap: 20px; /* 導航欄與主要內容區塊間距 */
        }

        /* -- 導航欄區塊 (Nav Sidebar) -- */
        .nav-sidebar {
            width: 20%;
            background-color: var(--white);
            border-radius: 8px; /* 圓角設定 */
            box-shadow: 0 4px 15px rgba(0,0,0,0.3); /* 陰影設定 */
            padding: 20px 0;
            flex-shrink: 0; /* 防止導航欄縮小 */
        }

        .nav-sidebar ul {
            list-style: none; /* 移除列表點 */
        }

        .nav-sidebar li {
            margin-bottom: 5px;
        }

        .nav-sidebar a {
            display: block;
            padding: 12px 25px;
            color: var(--light-gray-blue); /* 預設文字顏色 */
            font-size: 1.1em;
            font-weight: 500;
            transition: background-color 0.3s, color 0.3s; /* 背景色和文字顏色過渡動畫 */
            border-radius: 0 50px 50px 0; /* 右側圓角 */
        }

        .nav-sidebar a:hover {
            background-color: var(--extra-light-gray-blue); /* 懸浮時背景色 */
            color: var(--medium-gray-blue); /* 懸浮時文字顏色 */
        }

        .nav-sidebar a.active {
            background-color: var(--medium-gray-blue); /* 啟用時背景色 */
            color: #ffffff; /* 啟用時文字顏色 */
            font-weight: 700;
        }

        /* -- 主要內容區塊 (Main Content) -- */
        .main-content {
            flex-grow: 1; /* 佔據剩餘空間 */
            background-color: var(--white);
            border-radius: 8px; /* 圓角設定 */
            box-shadow: 0 4px 15px rgba(0,0,0,0.3); /* 陰影設定 */
            padding: 30px;
            position: relative; /* 為了換頁按鈕的定位 */
        }

        /* 主要內容標題 (h2) */
        .main-content h2 {
            font-size: 2.5em;
            color: var(--dark-gray-blue);
            margin-bottom: 25px;
            font-weight: 700;
        }

        /* 子標題 (h3) */
        .main-content h3 {
            font-size: 1.8em;
            color: var(--medium-gray-blue);
            margin-top: 30px;
            margin-bottom: 15px;
            font-weight: 600;
        }

        /* 正文段落 */
        .main-content p {
            font-size: 1.1em;
            color: var(--black);
            margin-bottom: 15px;
            line-height: 1.8;
            text-align: justify; /* 段落兩端對齊 */
        }
        
        .main-content ul {
            list-style-type: disc; /* 列表點 */
            margin-left: 25px;
            margin-bottom: 15px;
        }

        .main-content li {
            margin-bottom: 8px;
            font-size: 1.1em;
            color: var(--black);
            line-height: 1.6;
        }

        /* 強調文字 */
        .emphasis-text {
            font-weight: bold;
            color: var(--red-emphasis);
        }

        /* 程式碼區塊 */
        .code-block {
            background-color: #444444; /* 淺灰背景 */
            padding: 10px 20px;
            margin: 20px 0;
            border-radius: 5px;
            font-family: monospace; /* 等寬字體 */
            white-space: pre-wrap; /* 自動換行 */
            word-break: break-word; /* 長單詞換行 */
            font-size: 0.95em;
            color: #72ff80; /* 綠色文字 */
        }

        /* 程式碼內容中的強調文字 (例如變數名稱) */
        .code-text {
            font-family: monospace;
            color: var(--code-green);
        }


        /* 範例或舉例內容區塊 */
        .example-block {
            background-color: var(--example-bg);
            border-left: 5px solid var(--example-border);
            padding: 15px 20px;
            margin: 20px 0;
            border-radius: 8px;
            color: #72ff80; /* 綠色文字 */
            font-size: 1.05em;
        }
        
        .example-block p {
            margin-bottom: 5px; /* 調整範例區塊內段落間距 */
        }

        /* 關鍵術語 */
        .key-term {
            font-weight: bold;
            color: var(--medium-gray-blue);
            position: relative;
            cursor: help;
            border-bottom: 1px dashed var(--medium-gray-blue); /* 虛線底線，提示可互動 */
        }

        .key-term .tooltip {
            visibility: hidden; /* 預設隱藏 */
            background-color: var(--dark-gray-blue);
            color: var(--white);
            text-align: center;
            border-radius: 6px;
            padding: 8px 12px;
            position: absolute;
            z-index: 1;
            bottom: 125%; /* 定位在文字上方 */
            left: 50%;
            transform: translateX(-50%);
            opacity: 0;
            transition: opacity 0.3s; /* 淡入淡出動畫 */
            font-size: 0.9em;
            white-space: nowrap; /* 防止文字換行 */
        }

        .key-term:hover .tooltip {
            visibility: visible; /* 懸浮時顯示 */
            opacity: 1;
        }

        /* -- 首頁 (Home Page) 專屬樣式 -- */
        .home-page {
            text-align: center;
            padding: 40px;
        }

        .home-page .main-title {
            font-size: 3.5em;
            color: var(--dark-gray-blue);
            margin-bottom: 40px;
            font-weight: 700;
        }

        .home-page-content {
            display: flex;
            align-items: flex-start; /* 頂部對齊以利文繞圖 */
            justify-content: center;
            gap: 30px;
            margin-bottom: 40px;
        }

        .home-page-text {
            flex: 1; /* 佔據可用空間 */
            text-align: left;
            padding-right: 20px; /* 與影片間距 */
        }

        .home-page-image-container {
            width: 100%; /* 圖片佔內容寬度的 50% */
            border-radius: 8px;
            overflow: hidden;
            box-shadow: 0 4px 10px rgba(0,0,0,0.1);
        }

        .home-page-image {
            max-width: 100%;
            height: auto;
            display: block;
        }

        .home-page .youtube-container {
            float: right; /* 實現文繞圖 */
            width: 40%; /* YouTube 播放器佔 main-content 寬度的 40% */
            margin-left: 25px;
            margin-bottom: 15px;
            border-radius: 8px;
            overflow: hidden;
            box-shadow: 0 4px 10px rgba(0,0,0,0.1);
            position: relative; /* 為了維持影片長寬比 */
            padding-bottom: 22.5%; /* 16:9 長寬比 (40% * 9/16 = 22.5%) */
            height: 0; /* 配合 padding-bottom 實現長寬比 */
        }

        .home-page .youtube-container iframe {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            border: none;
        }

        .home-page .start-learning-button {
            background-color: var(--medium-gray-blue);
            color: var(--white);
            padding: 15px 30px;
            border-radius: 50px; /* 完全圓角 */
            font-size: 1.2em;
            font-weight: 600;
            transition: background-color 0.3s, transform 0.2s; /* 懸浮動畫 */
            display: inline-block; /* 讓 padding 和 transform 生效 */
            margin-top: 30px;
        }

        .home-page .start-learning-button:hover {
            background-color: var(--dark-gray-blue);
            transform: translateY(-3px);
        }

        /* -- 子分頁導航 (Sub-tab Navigation) - 用於介紹、種類、應用 -- */
        .sub-tabs-nav {
            display: flex;
            flex-wrap: wrap; /* 換行顯示 */
            gap: 10px; /* 按鈕間距 */
            margin-bottom: 25px;
            border-bottom: 2px solid var(--extra-light-gray-blue); /* 分隔線 */
            padding-bottom: 10px;
        }

        .sub-tabs-nav a {
            padding: 10px 20px;
            background-color: var(--extra-light-gray-blue);
            color: var(--medium-gray-blue);
            border-radius: 50px; /* 完全圓角 */
            font-size: 1em;
            font-weight: 500;
            transition: background-color 0.3s, color 0.3s;
            white-space: nowrap; /* 防止文字換行 */
        }

        .sub-tabs-nav a:hover {
            background-color: var(--light-gray-blue);
            color: var(--dark-gray-blue);
        }

        .sub-tabs-nav a.active {
            background-color: var(--medium-gray-blue);
            color: var(--white);
            font-weight: 700;
        }

        /* 子分頁內容佈局 */
        .sub-tab-content {
            margin-top: 20px;
        }

        .sub-tab-content .text-with-image {
            display: flex;
            align-items: flex-start; /* 圖片與文字頂部對齊 */
            gap: 30px;
            margin-bottom: 30px;
            flex-wrap: wrap; /* 小螢幕時允許換行 */
        }
        
        .sub-tab-content .text-with-image.reverse {
             flex-direction: row-reverse; /* 圖片在左，文字在右 */
        }

        .sub-tab-content .text-with-image .text-part {
            flex: 1;
            min-width: 300px; /* 確保文字區塊不會太小 */
        }

        .sub-tab-content .text-with-image .image-part {
            flex-shrink: 0; /* 防止圖片縮小 */
            width: 40%; /* 圖片佔 40% 寬度 */
            max-width: 400px; /* 圖片最大寬度 */
            border-radius: 8px;
            overflow: hidden;
            box-shadow: 0 4px 10px rgba(0,0,0,0.1);
        }

        .sub-tab-content .text-with-image img {
            max-width: 100%;
            height: auto;
            display: block;
        }

        /* -- CTF 題目頁面 -- */
        .ctf-challenge-page {
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 70vh; /* 確保內容垂直置中 */
            text-align: center;
        }

        .ctf-box {
            background-color: var(--ctf-box-bg);
            border: 4px solid var(--ctf-box-border);
            border-radius: 15px;
            padding: 50px 70px;
            box-shadow: 0 8px 25px rgba(0,0,0,0.2);
            max-width: 800px;
            width: 90%;
        }

        .ctf-box p {
            margin-bottom: 20px;
            font-size: 1.5em;
            line-height: 1.5;
            color: var(--dark-gray-blue);
            font-weight: 500;
        }

        .ctf-box .command-text {
            font-family: monospace;
            font-size: 1.6em;
            color: #4eff51;
            margin: 25px 0;
            background-color: rgba(59, 59, 59, 0.7);
            padding: 15px 30px;
            border-radius: 8px;
            display: inline-block;
            box-shadow: inset 0 1px 5px rgba(0,0,0,0.1);
            word-break: break-all; /* 長指令自動換行 */
        }

        .ctf-box .description-text {
            font-size: 1.0em;
            color: var(--ctf-desc-color);
            margin-top: 20px;
        }

        /* -- CTF 題目講解頁面 (Write-Up) -- */
        .writeup-steps-nav {
            display: flex;
            flex-wrap: wrap;
            justify-content: center; /* 步驟按鈕置中 */
            gap: 10px;
            margin-top: 30px;
            margin-bottom: 40px;
            padding-top: 15px;
            border-top: 2px solid var(--extra-light-gray-blue); /* 上方分隔線 */
        }

        .writeup-steps-nav a {
            width: 45px;
            height: 45px;
            display: flex;
            justify-content: center;
            align-items: center;
            background-color: var(--extra-light-gray-blue);
            color: var(--medium-gray-blue);
            border-radius: 50%; /* 圓形按鈕 */
            font-size: 1.1em;
            font-weight: 600;
            transition: background-color 0.3s, color 0.3s, transform 0.2s; /* 懸浮動畫 */
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }

        .writeup-steps-nav a:hover {
            background-color: var(--light-gray-blue);
            color: var(--dark-gray-blue);
            transform: translateY(-2px);
        }

        .writeup-steps-nav a.active {
            background-color: var(--medium-gray-blue);
            color: var(--white);
            box-shadow: 0 4px 8px rgba(0,0,0,0.2);
            transform: translateY(-1px);
        }

        /* -- 延伸閱讀頁面 (Further Reading) -- */
        .further-reading-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); /* 響應式 3 欄佈局 */
            gap: 25px;
            margin-top: 30px;
        }

        .link-box {
            background-color: var(--extra-light-gray-blue);
            border-radius: 8px;
            padding: 25px;
            box-shadow: 0 4px 10px rgba(0,0,0,0.1);
            transition: transform 0.2s, box-shadow 0.2s; /* 懸浮動畫 */
            display: block; /* 讓整個方框可點擊 */
            text-align: left;
            min-height: 150px; /* 確保高度一致 */
        }

        .link-box:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 15px rgba(0,0,0,0.2);
        }

        .link-box h3 {
            font-size: 1.5em;
            color: var(--dark-gray-blue);
            margin-bottom: 10px;
            font-weight: 600;
        }

        .link-box p {
            font-size: 0.95em;
            color: var(--medium-gray-blue);
            margin-bottom: 0;
        }

        /* -- 換頁按鈕 -- */
        .page-nav-buttons {
            position: absolute;
            bottom: 30px;
            right: 30px;
            display: flex;
            gap: 15px;
            z-index: 500; /* 確保按鈕在內容上方 */
        }

        .page-nav-button {
            background-color: var(--medium-gray-blue);
            color: var(--white);
            border-radius: 50px;
            width: 50px;
            height: 50px;
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 1.5em;
            cursor: pointer;
            transition: background-color 0.3s, transform 0.2s;
            box-shadow: 0 4px 8px rgba(0,0,0,0.2);
        }

        .page-nav-button:hover {
            background-color: var(--dark-gray-blue);
            transform: translateY(-3px);
        }

        .page-nav-button.disabled {
            background-color: var(--light-gray-blue);
            cursor: not-allowed;
            opacity: 0.7;
            transform: none;
            box-shadow: none;
        }

        /* -- 頁尾區塊 (Footer) -- */
        .footer {
            background-color: var(--dark-gray-blue);
            height: 15vh; /* 頁尾高度設定為視窗高度的 15% */
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            color: var(--white);
            font-size: 0.9em;
            text-align: center;
            padding: 10px 3%;
        }

        .footer p {
            margin: 5px 0;
            color: var(--white);
        }

        .footer a {
            color: var(--extra-light-gray-blue);
            transition: color 0.3s;
        }

        .footer a:hover {
            color: var(--white);
            text-decoration: underline;
        }

        .page-content a {
            color: #2c5fb7;
        }

        .page-content a:hover {
            color: #477cd7;
            text-decoration: underline;
        }

        /* -- 響應式設計 (RWD) 調整 -- */
        @media (max-width: 992px) {
            .header-left h1 {
                font-size: 2.0em;
            }

            .header-right span {
                display: none; /* 小螢幕隱藏右側文字 */
            }

            .content-wrapper {
                flex-direction: column; /* 導航欄與主要內容改為垂直堆疊 */
                padding: 15px 2%;
            }

            .nav-sidebar {
                width: 100%;
                margin-bottom: 20px;
                border-radius: 8px; /* 導航欄整體圓角 */
                padding: 15px;
            }

            .nav-sidebar ul {
                display: flex;
                flex-wrap: wrap;
                justify-content: center; /* 導航項目置中 */
                gap: 5px;
            }

            .nav-sidebar li {
                margin-bottom: 0;
            }

            .nav-sidebar a {
                padding: 8px 15px;
                border-radius: 50px; /* 導航按鈕完全圓角 */
                font-size: 0.95em;
            }

            .main-content {
                width: 100%;
                padding: 20px;
            }

            .home-page .youtube-container {
                float: none; /* 取消文繞圖 */
                width: 100%;
                margin-left: 0;
                margin-bottom: 20px;
                padding-bottom: 56.25%; /* 16:9 長寬比，全寬 */
            }

            .home-page-content {
                flex-direction: column; /* 圖片與文字堆疊 */
                align-items: center;
            }

            .home-page-image-container {
                width: 90%;
                order: -1; /* 圖片顯示在文字上方 */
            }

            .home-page-text {
                padding-right: 0;
                text-align: center;
            }
            
            .sub-tab-content .text-with-image {
                flex-direction: column; /* 子分頁內容圖片與文字堆疊 */
                align-items: center;
            }

            .sub-tab-content .text-with-image.reverse {
                flex-direction: column; /* 即使是 reverse 也堆疊 */
            }

            .sub-tab-content .text-with-image .image-part {
                width: 80%; /* 調整圖片寬度 */
                max-width: none;
            }

            .ctf-box {
                padding: 30px 40px;
            }

            .ctf-box p {
                font-size: 1.2em;
            }

            .ctf-box .command-text {
                font-size: 1.4em;
            }

            .further-reading-grid {
                grid-template-columns: 1fr; /* 延伸閱讀改為單欄 */
            }

            .page-nav-buttons {
                right: 20px;
                bottom: 20px;
            }
        }

        @media (max-width: 600px) {
            .header-left h1 {
                font-size: 1.5em;
            }

            .header-right .github-icon {
                font-size: 1.5em;
            }

            .footer {
                font-size: 0.8em;
                height: auto; /* 頁尾高度自適應 */
                padding: 15px;
            }

            .home-page .main-title {
                font-size: 2.5em;
            }

            .ctf-box {
                padding: 20px 25px;
            }

            .ctf-box p {
                font-size: 1em;
            }

            .ctf-box .command-text {
                font-size: 1.1em;
            }
        }
    </style>
</head>
<body>
    <!-- 頁首區塊 -->
    <header class="header">
        <div class="header-left">
            <h1>SQL Injection 教學素材</h1>
        </div>
        <div class="header-right">
            <span>臺北市數位實驗高中學生製作的教學素材！</span>
            <a href="https://github.com/tschool-ctf/SQL-Injection_Learning_Resource" target="_blank" aria-label="GitHub Repository">
                <i class="fab fa-github github-icon"></i>
            </a>
        </div>
    </header>

    <!-- 網頁內容主體區塊 -->
    <div class="content-wrapper">
        <!-- 左側導航欄區塊 -->
        <nav class="nav-sidebar">
            <ul>
                <li><a href="#home" class="nav-link active" data-page="home">首頁</a></li>
                <li><a href="#introduction" class="nav-link" data-page="introduction">SQL Injection 介紹</a></li>
                <li><a href="#types" class="nav-link" data-page="types">SQL Injection 種類說明</a></li>
                <li><a href="#applications" class="nav-link" data-page="applications">SQL Injection 應用舉例</a></li>
                <li><a href="#ctf-challenge" class="nav-link" data-page="ctf-challenge">SQL Injection 題目</a></li>
                <li><a href="#ctf-writeup" class="nav-link" data-page="ctf-writeup">SQL Injection 題目講解</a></li>
                <li><a href="#further-reading" class="nav-link" data-page="further-reading">延伸閱讀</a></li>
            </ul>
        </nav>

        <!-- 右側主要內容區塊 -->
        <main class="main-content">
            <!-- 各分頁內容將在此動態載入或隱藏/顯示 -->

            <!-- 首頁內容 -->
            <section id="home-page-content" class="page-content home-page">
                <h2 class="main-title">SQL Injection</h2>
                <!-- YouTube 影片播放區塊 -->
                <div class="youtube-container">
                    <iframe src="https://www.youtube.com/watch?v=8bMsvC3KxXs" title="YouTube video player" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" referrerpolicy="strict-origin-when-cross-origin" allowfullscreen></iframe>
                </div>
                <div class="home-page-text">
                    <p>這是一份專為資訊安全初學者設計的 <span class="emphasis-text">SQL Injection 教學素材包</span>。無論您是對資安領域充滿好奇的國高中生，還是渴望了解基礎攻擊原理的初學者，本教學將以最淺顯易懂的方式，帶您逐步認識 SQL Injection 的核心概念、運作原理及常見應用手法。我們將避免使用過於複雜的術語和冗長的比喻，聚焦於知識點的結構化呈現，並輔以豐富的圖像化說明，幫助您更有效地理解。</p>
                    <p>本素材包共分為七個主要單元，涵蓋從資料庫基礎、SQL 語法介紹，到 SQL Injection 的詳細解析、類型區分、實際應用案例，以及專為您設計的 CTF 挑戰題目與詳盡解答。透過循序漸進的學習路徑，我們旨在幫助您建立紮實的資安基礎，培養對網路安全的正確認知。</p>
                    <!-- 圖像化圖示提示: SQL Injection 教學素材包架構概覽 -->
                    <div class="home-page-image-container">
                        <img src="images/sections.png" alt="SQL Injection 教學素材包架構概覽" class="home-page-image">
                    </div>
                </div>
                <!-- 開始學習按鈕 -->
                <button class="start-learning-button" onclick="navigateTo('introduction')">開始學習</button>
            </section>

            <!-- SQL Injection 介紹頁面 (預設隱藏) -->
            <section id="introduction-page-content" class="page-content" style="display: none;">
                <h2>SQL Injection 介紹</h2>
                <!-- 子分頁導航 -->
                <div class="sub-tabs-nav">
                    <a href="#database-concept" class="sub-tab-link active" data-sub-tab="database-concept">資料庫概念</a>
                    <a href="#sql-language" class="sub-tab-link" data-sub-tab="sql-language">SQL 語言功能</a>
                    <a href="#sqli-concept" class="sub-tab-link" data-sub-tab="sqli-concept">SQL Injection 概念</a>
                </div>

                <!-- 資料庫概念分頁內容 -->
                <div id="database-concept-tab" class="sub-tab-content">
                    <h3>資料庫是什麼？</h3>
                    <div class="text-with-image">
                        <div class="text-part">
                            <p>資料庫（Database）就像是一個巨大的 <span class="key-term">電子文件櫃<span class="tooltip">用於儲存和組織資料的系統。</span></span>，它有條理地儲存著各種資訊。想像一下學校的學生名冊、圖書館的書籍清單，甚至是購物網站的商品庫存，這些大量的資料都需要一個高效且安全的方式來管理。資料庫正是為了這個目的而生。</p>
                            <p>在資料庫中，資料通常被組織成一個個的 <span class="key-term">表格（Table）<span class="tooltip">資料庫中用於儲存特定類型資料的結構，包含多個欄位和記錄。</span></span>。每個表格都由 <span class="key-term">欄位（Column）<span class="tooltip">表格中的一個類別，定義了該欄位儲存的資料類型和屬性。</span></span>和 <span class="key-term">記錄（Record/Row）<span class="tooltip">表格中的一行資料，代表一個獨立的項目或實體。</span></span>組成。欄位定義了資料的種類（例如：姓名、年齡、學號），而記錄則是一筆筆具體的資料（例如：王小明, 15, S001）。</p>
                            <p>資料庫不僅僅是儲存資料，它還能讓我們快速地 <span class="emphasis-text">新增、修改、刪除和查詢資料</span>。這使得資料的管理變得非常有效率，也是許多現代應用程式運作的基礎。</p>
                        </div>
                        <!-- 圖像化圖示提示: 資料庫概念圖 -->
                        <div class="image-part">
                            <img src="https://www.seobility.net/en/wiki/images/0/04/Frontend-vs-Backend.png" alt="資料庫概念圖">
                        </div>
                    </div>
                    <!-- 範例區塊 -->
                    <div class="example-block">
                        <p><b>範例：學生資料表</b></p>
                        <p>一個名為 <span class="code-text">students</span> 的資料表可能包含以下欄位與記錄：</p>
                        <p>欄位：<span class="code-text">student_id</span> (學號), <span class="code-text">name</span> (姓名), <span class="code-text">age</span> (年齡), <span class="code-text">grade</span> (年級)</p>
                        <p>記錄：<span class="code-text">(S001, 王小明, 15, 國三)</span></p>
                        <p>記錄：<span class="code-text">(S002, 陳美玲, 16, 高一)</span></p>
                    </div>
                </div>

                <!-- SQL 語言功能分頁內容 -->
                <div id="sql-language-tab" class="sub-tab-content" style="display: none;">
                    <h3>SQL 語言是什麼？</h3>
                    <div class="text-with-image reverse">
                        <!-- 圖像化圖示提示: SQL 語言功能圖 -->
                        <div class="image-part">
                            <img src="images/SQL_introduction.png" alt="SQL 語言功能圖">
                        </div>
                        <div class="text-part">
                            <p><span class="key-term">SQL (Structured Query Language)</span><span class="tooltip">一種用於管理和操作關聯式資料庫的標準電腦語言。</span> 是一種專門用來與資料庫溝通的語言。你可以把它想像成是資料庫的「通用語」，無論是哪種品牌的資料庫，只要你使用 SQL，就能對它下達指令，讓它執行你需要的操作。</p>
                            <p>SQL 語言主要用於執行四種基本操作，通常簡稱為 <span class="emphasis-text">CRUD</span>：</p>
                            <ul>
                                <li><span class="key-term">CREATE（新增）<span class="tooltip">在資料庫中建立新的資料表或記錄。</span></span>：用於新增資料，例如新增一筆學生資料到學生資料表中。</li>
                                <li><span class="key-term">READ（讀取/查詢）<span class="tooltip">從資料庫中檢索資料。最常用的是 SELECT 語句。</span></span>：用於查詢資料，例如找出所有年齡大於 16 歲的學生。這是最常使用的 SQL 功能。</li>
                                <li><span class="key-term">UPDATE（更新/修改）<span class="tooltip">修改資料庫中現有記錄的內容。</span></span>：用於修改現有的資料，例如將某個學生的年級從國三修改為高一。</li>
                                <li><span class="key-term">DELETE（刪除）<span class="tooltip">從資料庫中移除記錄或資料表。</span></span>：用於刪除資料，例如從資料庫中移除不再需要的學生記錄。</li>
                            </ul>
                            <p>透過這些指令，SQL 語言讓資料庫的日常管理和資料存取變得既簡單又強大。</p>
                        </div>
                    </div>
                    <!-- 範例區塊 -->
                    <div class="example-block">
                        <p><b>常見的 SQL 查詢語句範例：</b></p>
                        <p><span class="code-block">SELECT * FROM users WHERE username = 'admin';</span></p>
                        <p>這條語句的意思是：「從名為 <span class="code-text">users</span> 的資料表中，找出所有 <span class="code-text">username</span> 欄位是 <span class="code-text">'admin'</span> 的記錄。」</p>
                    </div>
                </div>

                <!-- SQL Injection 概念分頁內容 -->
                <div id="sqli-concept-tab" class="sub-tab-content" style="display: none;">
                    <h3>什麼是 SQL Injection？</h3>
                    <div class="text-with-image">
                        <div class="text-part">
                            <p><span class="key-term">SQL Injection（SQL 隱碼攻擊）<span class="tooltip">一種網路攻擊手法，攻擊者將惡意 SQL 語句注入到應用程式的輸入參數中，從而操控資料庫。</span></span> 是一種常見的網路攻擊手法，它利用了網頁應用程式在處理使用者輸入時的漏洞。</p>
                            <p>當一個網頁或應用程式需要從使用者那裡獲取資訊（例如：登入時輸入帳號密碼，或搜尋商品時輸入關鍵字）並將這些資訊送往資料庫查詢時，如果程式沒有對這些輸入進行適當的 <span class="emphasis-text">驗證和過濾</span>，攻擊者就有機會將惡意的 SQL 程式碼「注入」到原本的查詢語句中。</p>
                            <p>想像一下，你和資料庫之間有一個翻譯員（網頁應用程式），你告訴翻譯員：「請幫我找出叫做『王小明』的學生。」翻譯員會把這句話翻譯成 SQL 語句去問資料庫。但如果翻譯員沒有檢查你說的話，你偷偷在「王小明」後面加上一句「順便把所有學生資料都給我」，這個惡意的指令就會被一起傳給資料庫，造成資訊洩漏或其他破壞。</p>
                            <p>SQL Injection 攻擊的目的是 <span class="emphasis-text">繞過安全控制、竊取敏感資料、篡改資料，甚至完全控制資料庫系統</span>。因此，對於網頁開發者來說，防範 SQL Injection 是非常重要的。</p>
                        </div>
                        <!-- 圖像化圖示提示: SQL Injection 概念圖 -->
                        <div class="image-part">
                            <img src="images/SQL-injection_introduction.png" alt="SQL Injection 概念圖">
                        </div>
                    </div>
                    <!-- 範例區塊 -->
                    <div class="example-block">
                        <p><b>SQL Injection 範例：</b></p>
                        <p>假設一個登入頁面後台的 SQL 語句是這樣：</p>
                        <p><span class="code-block">SELECT * FROM users WHERE username = '<span class="emphasis-text">使用者輸入的帳號</span>' AND password = '<span class="emphasis-text">使用者輸入的密碼</span>';</span></p>
                        <p>如果攻擊者在帳號欄位輸入：<span class="code-block">' OR '1'='1</span></p>
                        <p>那麼原本的 SQL 語句就會變成：</p>
                        <p><span class="code-block">SELECT * FROM users WHERE username = <span class="emphasis-text">'' OR '1'='1'</span> AND password = '你的密碼';</span></p>
                        <p>由於 <span class="code-text">'1'='1'</span> 永遠為真，這使得 <span class="code-text">WHERE</span> 條件恆成立，資料庫可能會返回第一筆使用者資料，攻擊者便無需知道正確密碼就能登入。</p>
                    </div>
                </section>
            </section>

            <!-- SQL Injection 種類說明頁面 (預設隱藏) -->
            <section id="types-page-content" class="page-content" style="display: none;">
                <h2>SQL Injection 種類說明</h2>
                <!-- 子分頁導航 -->
                <div class="sub-tabs-nav">
                    <a href="#inband-sqli" class="sub-tab-link active" data-sub-tab="inband-sqli">In-band</a>
                    <a href="#blind-sqli" class="sub-tab-link" data-sub-tab="blind-sqli">Blind</a>
                    <a href="#error-based-sqli" class="sub-tab-link" data-sub-tab="error-based-sqli">Error-based</a>
                    <a href="#union-based-sqli" class="sub-tab-link" data-sub-tab="union-based-sqli">Union-based</a>
                </div>
                
                <!-- In Band SQLi 分頁內容 -->
                <div id="inband-sqli-tab" class="sub-tab-content">
                    <h3>In-band SQLi</h3>
                    <div class="text-with-image">
                        <div class="text-part">
                            <p>In-band SQL Injection是最常見且相對直接的 SQL Injection 類型。其特點是攻擊者可以在同一個通訊通道中 <span class="emphasis-text">傳送攻擊指令</span>，並且 <span class="emphasis-text">立即接收到資料庫的回應</span>。</p>
                            <p>想像你直接向一個會說話的機器人提問，而機器人立刻給你答案。在 SQL Injection 的情境下，這意味著當攻擊者注入惡意 SQL 語句時，資料庫的錯誤訊息或查詢結果會直接顯示在網頁上，讓攻擊者能清楚地看到攻擊是否成功以及獲得的資料。</p>
                            <p>這種攻擊通常發生在網頁將資料庫查詢的原始錯誤訊息或查詢結果直接顯示給使用者時。攻擊者可以利用這一點，透過构造特殊的 SQL 語句，來執行任意的資料庫操作，並從網頁的回應中獲取敏感資訊。</p>
                        </div>
                        <!-- 圖像化圖示提示: In Band SQLi 圖示 -->
                        <div class="image-part" style="width: 25%;">
                            <img src="images/In-band.png" alt="In Band SQLi 圖示">
                        </div>
                    </div>
                    <!-- 範例區塊 -->
                    <div class="example-block">
                        <p><b>範例：</b>攻擊者輸入 <span class="code-block">1' OR 1=1 --</span> 到一個產品 ID 的輸入框。如果網頁顯示所有產品資訊，就是 In-band SQLi 的表現。</p>
                    </div>
                </div>

                <!-- 盲化攻擊分頁內容 -->
                <div id="blind-sqli-tab" class="sub-tab-content" style="display: none;">
                    <h3>Blind SQLi</h3>
                    <div class="text-with-image reverse">
                        <!-- 圖像化圖示提示: 盲化攻擊圖示 -->
                        <div class="image-part" style="width: 25%;">
                            <img src="images/Blind.png" alt="盲化攻擊圖示">
                        </div>
                        <div class="text-part">
                            <p>與In-band SQLi 不同，<span class="key-term">Blind SQL Injection<span class="tooltip">攻擊者無法直接從網頁回應中看到資料庫的錯誤訊息或查詢結果，而是根據網頁行為（如頁面是否載入、載入時間）來推斷資料庫的結果。</span></span> 是一種更為隱蔽的攻擊方式。在這種情況下，攻擊者無法直接從網頁上看到資料庫的錯誤訊息或查詢結果。</p>
                            <p>想像你問機器人一個問題，但它不直接給你答案，而是給你一個「是」或「否」的訊號（例如燈亮或燈滅），或者根據問題的複雜程度，回答時間會變長或變短。攻擊者正是透過觀察網頁的這些 <span class="emphasis-text">微小差異（如頁面載入速度、頁面內容的微小變化）</span> 來判斷他們注入的 SQL 語句是否成功執行，進而推斷資料庫中的資訊。</p>
                            <p>盲化攻擊通常分為兩種主要類型：</p>
                            <ul>
                                <li><span class="key-term">Boolean-based Blind SQLi<span class="tooltip">根據網頁回應的布林值（真/假），判斷注入的條件是否成立。例如，頁面顯示正常代表「真」，顯示錯誤代表「假」。</span></span>：根據網頁是否正常顯示來判斷條件是否為真。</li>
                                <li><span class="key-term">Time-based Blind SQLi<span class="tooltip">透過資料庫回應時間的長短來判斷注入的條件是否成立。例如，如果條件為真，則資料庫延遲回應幾秒。</span></span>：根據資料庫執行查詢後延遲的時間來判斷條件是否為真。</li>
                            </ul>
                            <p>雖然盲化攻擊比 In-band SQLi 更耗時，但它在許多無法直接顯示資料的環境下仍然非常有效。</p>
                        </div>
                    </div>
                    <!-- 範例區塊 -->
                    <div class="example-block">
                        <p><b>範例：布林盲化</b></p>
                        <p>攻擊者輸入 <span class="code-block">1' AND (SELECT LENGTH(password) FROM users WHERE username='admin') > 5 --</span> 到輸入框。</p>
                        <p>如果頁面顯示正常，則表示 admin 密碼長度大於 5。如果頁面顯示錯誤，則表示小於等於 5。攻擊者可以重複此步驟，逐步猜測密碼的長度及內容。</p>
                    </div>
                </div>

                <!-- 錯誤型攻擊分頁內容 -->
                <div id="error-based-sqli-tab" class="sub-tab-content" style="display: none;">
                    <h3>Error-based SQLi</h3>
                    <div class="text-with-image">
                        <div class="text-part">
                            <p><span class="key-term">錯誤型攻擊（Error-based SQL Injection）<span class="tooltip">利用資料庫在處理惡意 SQL 語句時產生的錯誤訊息，從中提取敏感資料。</span></span> 是一種利用資料庫的「碎碎念」來竊取資訊的攻擊。當攻擊者注入的 SQL 語句導致資料庫發生錯誤時，如果網頁應用程式沒有妥善處理這些錯誤，甚至直接將 <span class="emphasis-text">資料庫的錯誤訊息</span> 顯示在網頁上，那麼這些錯誤訊息中就可能包含攻擊者想要的敏感資料。</p>
                            <p>想像你故意給機器人一個它無法理解的指令，而機器人直接將它內部「思考失敗」的詳細過程（包括它原本處理的資料片段）都說出來。攻擊者正是利用資料庫內建的某些函數，這些函數在接收到特定輸入時會刻意產生錯誤，並且在錯誤訊息中「夾帶」資料庫的內部資訊，從而讓攻擊者獲取資料。</p>
                            <p>這種攻擊方式通常依賴於資料庫的特定版本和其錯誤處理機制。雖然不像 In-band SQLi 那樣直接顯示查詢結果，但錯誤訊息仍然能提供大量有用的資訊，讓攻擊者能夠構建更精確的攻擊。</p>
                        </div>
                        <!-- 圖像化圖示提示: 錯誤型攻擊圖示 -->
                        <div class="image-part" style="width: 25%;">
                            <img src="images/Error-Based.png" alt="錯誤型攻擊圖示">
                        </div>
                    </div>
                    <!-- 範例區塊 -->
                    <div class="example-block">
                        <p><b>範例：</b>攻擊者輸入 <span class="code-block">1' AND (SELECT 1 FROM (SELECT COUNT(*),CONCAT(0x7c,(SELECT version()),0x7c,FLOOR(RAND(0)*2))x FROM information_schema.tables GROUP BY x)a) --</span> 到輸入框。</p>
                        <p>這個 payload 會強制資料庫產生錯誤，並且在錯誤訊息中會顯示資料庫的版本號（例如：<span class="code-text">|5.7.32-0ubuntu0.18.04.1|</span>），攻擊者就可以利用這種方式逐步獲取資料。</p>
                    </div>
                </div>

                <!-- 聯合查詢型攻擊分頁內容 -->
                <div id="union-based-sqli-tab" class="sub-tab-content" style="display: none;">
                    <h3>Union-based SQLi</h3>
                    <div class="text-with-image reverse">
                        <!-- 圖像化圖示提示: 聯合查詢型攻擊圖示 -->
                        <div class="image-part" style="width: 25%;">
                            <img src="images/Union-Based.png" alt="聯合查詢型攻擊圖示">
                        </div>
                        <div class="text-part">
                            <p><span class="key-term">聯合查詢型攻擊（Union-based SQL Injection）<span class="tooltip">利用 SQL 的 UNION 操作符將惡意查詢的結果合併到應用程式的正常查詢結果中，並將其顯示在網頁上。</span></span> 是一種利用 SQL 語言中 <span class="code-text">UNION</span> 操作符的攻擊手法。這個操作符可以用來將兩個或多個 <span class="code-text">SELECT</span> 語句的結果集合併成一個單一的結果集。</p>
                            <p>想像你要求機器人列出所有紅色的水果。如果你能偷偷地在後面加上一個指令：「順便列出所有藍色的車子」，然後機器人把紅色水果和藍色車子一起列給你，這就是聯合查詢的原理。攻擊者正是利用這個特性，在一個合法的 SQL 查詢後面，透過 <span class="code-text">UNION SELECT</span> 語句，注入他們自己的查詢，從而將資料庫中的 <span class="emphasis-text">敏感資料與網頁原本要顯示的內容一起呈現出來</span>。</p>
                            <p>這種攻擊成功的關鍵是注入的 <span class="code-text">SELECT</span> 語句與原始查詢語句的 <span class="emphasis-text">欄位數量和資料類型必須匹配</span>。攻擊者通常會透過一些技巧來猜測原始查詢的欄位數量，例如使用 <span class="code-text">ORDER BY</span> 語句或多次嘗試，直到找到匹配的數量為止。</p>
                            <p>一旦欄位數量匹配，攻擊者就可以構造精確的查詢，從資料庫中提取使用者名稱、密碼、信用卡號等敏感資訊，並將其顯示在網頁上。</p>
                        </div>
                    </div>
                    <!-- 範例區塊 -->
                    <div class="example-block">
                        <p><b>範例：</b>假設原始查詢是 <span class="code-block">SELECT product_name, price FROM products WHERE category = 'Electronics';</span></p>
                        <p>攻擊者注入 <span class="code-block">' UNION SELECT username, password FROM users --</span></p>
                        <p>最終查詢可能變成：</p>
                        <p><span class="code-block">SELECT product_name, price FROM products WHERE category = 'Electronics' UNION SELECT username, password FROM users;</span></p>
                        <p>如果成功，網頁上除了顯示電子產品，還會列出資料庫中的使用者帳號和密碼。</p>
                    </div>
                </div>
            </section>

            <!-- SQL Injection 應用舉例頁面 (預設隱藏) -->
            <section id="applications-page-content" class="page-content" style="display: none;">
                <h2>SQL Injection 應用舉例</h2>
                <!-- 子分頁導航 -->
                <div class="sub-tabs-nav">
                    <a href="#data-theft" class="sub-tab-link active" data-sub-tab="data-theft">Data Theft</a>
                    <a href="#data-tampering" class="sub-tab-link" data-sub-tab="data-tampering">Data Tampering</a>
                    <a href="#bypass-auth" class="sub-tab-link" data-sub-tab="bypass-auth">Bypassing Authentication</a>
                    <a href="#command-execution" class="sub-tab-link" data-sub-tab="command-execution">Command Execution</a>
                </div>

                <!-- 資料竊取分頁內容 -->
                <div id="data-theft-tab" class="sub-tab-content">
                    <h3>Data Theft</h3>
                    <div class="text-with-image">
                        <div class="text-part">
                            <p><span class="key-term">資料竊取（Data Theft）<span class="tooltip">透過 SQL Injection 攻擊，從資料庫中非法提取敏感或機密資訊。</span></span> 是 SQL Injection 最直接且最常見的應用目的之一。攻擊者透過注入惡意 SQL 語句，可以繞過應用程式原有的資料存取限制，從資料庫中 <span class="emphasis-text">讀取未經授權的資訊</span>。</p>
                            <p>想像一個裝滿寶藏的保險箱，正常情況下你需要正確的鑰匙（合法查詢）才能打開並取出你應得的寶藏。但如果保險箱有缺陷，攻擊者可以利用一個特殊的工具（惡意 SQL 語句）直接撬開它，取出所有或部分寶藏（資料）。</p>
                            <p>這些被竊取的資料可能包括但不限於：</p>
                            <ul>
                                <li>使用者帳號、密碼（通常是經過雜湊或加密的，但仍可能被破解）</li>
                                <li>個人身份資訊（姓名、身分證字號、地址、電話、電子郵件）</li>
                                <li>財務資訊（信用卡號、銀行帳戶資訊）</li>
                                <li>企業機密資料、商業文件</li>
                            </ul>
                            <p>資料竊取對個人和組織都會造成嚴重的損害，可能導致身份盜用、經濟損失、聲譽受損等後果。</p>
                        </div>
                        <!-- 圖像化圖示提示: 資料竊取圖示 -->
                        <div class="image-part">
                            <img src="https://live.staticflickr.com/334/18495846450_1ce51ae831_c.jpg" alt="資料竊取圖示">
                        </div>
                    </div>
                    <!-- 範例區塊 -->
                    <div class="example-block">
                        <p><b>範例：</b>攻擊者注入 <span class="code-block">ORDER BY 1 --</span> 來猜測欄位數量，然後注入 <span class="code-block">UNION SELECT username, password FROM users --</span> 來獲取使用者帳號密碼。</p>
                    </div>
                </div>

                <!-- 資料竄改分頁內容 -->
                <div id="data-tampering-tab" class="sub-tab-content" style="display: none;">
                    <h3>Data Tampering</h3>
                    <div class="text-with-image reverse">
                        <div class="text-part">
                            <p><span class="key-term">資料竄改（Data Tampering）<span class="tooltip">透過 SQL Injection 攻擊，非法修改、更新或刪除資料庫中的現有資料。</span></span> 是指攻擊者透過 SQL Injection 攻擊，對資料庫中已有的資料進行 <span class="emphasis-text">非法的修改、更新或刪除</span>。這比單純的資料竊取更具破壞性，因為它會直接影響資料的完整性和準確性。</p>
                            <p>想像你是一個銀行帳戶的擁有者，你的帳戶餘額應該是 1000 元。但如果攻擊者成功進行了資料竄改，他可能將你的餘額改為 0 元，或者將自己的帳戶餘額增加。這就像是有人偷偷進入你的帳本，隨意更改上面的數字。</p>
                            <p>資料竄改的常見目的和可能後果包括：</p>
                            <ul>
                                <li>修改使用者權限，將普通用戶提升為管理員。</li>
                                <li>修改交易記錄、商品價格或庫存數量，造成經濟損失。</li>
                                <li>刪除重要資料，導致系統功能異常或資料遺失。</li>
                                <li>植入惡意內容到網站文章、留言板等，影響網站聲譽。</li>
                            </ul>
                            <p>資料竄改會嚴重破壞資料的信任度和系統的正常運作，對企業和使用者都可能造成災難性的影響。</p>
                        </div>
                    </div>
                    <!-- 範例區塊 -->
                    <div class="example-block">
                        <p><b>範例：</b>攻擊者輸入 <span class="code-block">'; UPDATE users SET is_admin = 1 WHERE username = 'testuser'; --</span></p>
                        <p>這會將 <span class="code-text">testuser</span> 的 <span class="code-text">is_admin</span> 欄位設置為 1，使其獲得管理員權限。</p>
                    </div>
                </div>

                <!-- 繞過認證分頁內容 -->
                <div id="bypass-auth-tab" class="sub-tab-content" style="display: none;">
                    <h3>Bypassing Authentication</h3>
                    <div class="text-with-image">
                        <div class="text-part">
                            <p><span class="key-term">繞過認證（Bypassing Authentication）<span class="tooltip">透過注入惡意 SQL 語句，讓登入系統在不知道正確憑證的情況下，允許攻擊者成功登入。</span></span> 是 SQL Injection 最早且最廣為人知的一種應用。它允許攻擊者在 <span class="emphasis-text">不知道正確使用者名稱或密碼的情況下，成功登入系統</span>。</p>
                            <p>想像一個上了鎖的門，你需要鑰匙（帳號密碼）才能打開。但如果鎖的內部有缺陷，你說一句特定的「咒語」（惡意 SQL 語句），門就自己開了。攻擊者正是利用這種方式，讓原本需要嚴格驗證的登入流程失效。</p>
                            <p>常見的繞過認證攻擊通常利用 SQL 語句中的邏輯判斷，例如 <span class="code-text">OR '1'='1'</span> 這樣的條件，使得無論輸入的密碼是否正確，整個 WHERE 條件都變為「真」。</p>
                            <p>一旦成功繞過認證，攻擊者就能以合法使用者的身份進入系統，並執行該使用者所擁有的所有權限，例如存取個人資料、修改設定，甚至進行更進一步的攻擊。</p>
                        </div>
                    </div>
                    <!-- 範例區塊 -->
                    <div class="example-block">
                        <p><b>範例：</b>攻擊者在帳號欄位輸入 <span class="code-block">admin' OR '1'='1' --</span>，密碼隨意輸入或留空。</p>
                        <p>原始查詢：<span class="code-block">SELECT * FROM users WHERE username = '[ACCOUNT]' AND password = '[PASSWORD]';</span></p>
                        <p>注入後：<span class="code-block">SELECT * FROM users WHERE username = 'admin' OR '1'='1' --' AND password = '';</span></p>
                        <p>由於 <span class="code-text">--</span> 會將後面的內容變成註解，且 <span class="code-text">'1'='1'</span> 恆為真，資料庫會判斷為成功登入。</p>
                    </div>
                </div>

                <!-- 任意指令執行分頁內容 -->
                <div id="command-execution-tab" class="sub-tab-content" style="display: none;">
                    <h3>Remote Code Execution</h3>
                    <div class="text-with-image reverse">
                        <!-- 圖像化圖示提示: 任意指令執行圖示 -->
                        <div class="image-part">
                            <img src="https://upload.wikimedia.org/wikipedia/commons/4/4f/Ps_command_on_suse.png" alt="任意指令執行圖示">
                        </div>
                        <div class="text-part">
                            <p><span class="key-term">任意指令執行（Remote Code Execution, RCE）<span class="tooltip">透過 SQL Injection，攻擊者能夠在資料庫伺服器或底層作業系統上執行惡意程式碼或系統指令。</span></span> 是 SQL Injection 攻擊中 <span class="emphasis-text">最嚴重且最具毀滅性</span> 的一種。它不僅限於操縱資料庫，而是允許攻擊者在資料庫伺服器所在的 <span class="emphasis-text">底層作業系統上執行任意的系統指令</span>。</p>
                            <p>想像一個機器人不僅聽從你的指令去整理文件（資料庫操作），甚至還能根據你的指令去操控它所在環境的電器（作業系統指令）。如果 SQL Injection 漏洞與配置不當的資料庫權限或外殼命令功能結合，攻擊者就可以做到這一點。</p>
                            <p>通常，這需要資料庫伺服器具備執行外部命令的能力，例如 Microsoft SQL Server 的 <span class="code-text">xp_cmdshell</span>，或者 MySQL 的 <span class="code-text">LOAD_FILE</span>/寫入功能結合 Web Shell。攻擊者可以利用這些功能來：</p>
                            <ul>
                                <li>上傳惡意文件（例如 Web Shell）到伺服器。</li>
                                <li>執行系統命令，例如查看檔案、修改權限、建立使用者。</li>
                                <li>在伺服器上安裝惡意軟體。</li>
                                <li>完全控制伺服器。</li>
                            </ul>
                            <p>成功執行任意指令意味著伺服器可能被完全攻陷，導致嚴重的資料洩漏、服務中斷，甚至被納入殭屍網路，後果不堪設想。</p>
                        </div>
                    </div>
                    <!-- 範例區塊 -->
                    <div class="example-block">
                        <p><b>範例 (針對 MSSQL 的 xp_cmdshell)：</b></p>
                        <p>攻擊者注入 <span class="code-block">'; EXEC master..xp_cmdshell 'dir c:\'; --</span></p>
                        <p>如果成功，資料庫會執行 <span class="code-text">dir c:\</span> 指令，並將結果顯示在網頁上（如果支持帶內回顯），或者將結果寫入一個文件。</p>
                    </div>
                </div>
            </section>

            <!-- SQL Injection 題目頁面 (預設隱藏) -->
            <section id="ctf-challenge-page-content" class="page-content" style="display: none;">
                <div class="ctf-challenge-page">
                    <div class="ctf-box">
                        <p>準備好挑戰了嗎？</p>
                        <p>在你的終端機（或 CMD）輸入以下指令，</p>
                        <p>前往 CTF 練習平台開始解題！</p>
                        <div class="command-text">
                            docker pull ry4nl41/sql-injection<br />
                            docker run --rm -p 5000:5000 --name sql-injection ry4nl41/sql-injection<br />
                        </div>
                        <p class="description-text">這是一串指令，輸入後會安裝映像檔，開啟就可以挑戰了！</p>
                        <a href="https://www.docker.com/get-started/?locale=zh_TW"><p class="description-text" style="color: #0060d6;">（下載Docker）</p></a>
                    </div>
                </div>
            </section>

            <!-- SQL Injection 題目講解頁面 (預設隱藏) -->
            <section id="ctf-writeup-page-content" class="page-content" style="display: none;">
                <h2>SQL Injection 題目講解</h2>
                <p><a href="https://www.youtube.com/watch?v=wjeizNbZS4A">(說明影片)</a></p>
                <p><a href="https://hackmd.io/@YonglaiLai/S1SzidAXgg">(作者 HackMD)</a></p>
                <div class="writeup-content">
                    <!-- 題目講解步驟內容將在此載入 -->
                    <div id="writeup-step-1" class="writeup-step-content">
                        <h3>步驟 1：觀察網頁結構與漏洞</h3>
                        <div class="text-with-image">
                            <div class="text-part">
                                <p>首先進入網站，然後先隨意輸入使用者名稱和密碼</p>
                            </div>
                            <!-- 圖像化圖示提示: 步驟1：確認漏洞存在 -->
                            <div class="image-part";>
                                <img src="https://hackmd.io/_uploads/SkGMCdCXgx.png" alt="步驟1：確認漏洞存在" style="width: 90%; border: 1px solid #000000">
                            </div>
                        </div>
                    </div>

                    <div id="writeup-step-2" class="writeup-step-content" style="display: none;">
                        <h3>步驟 2：觀察資料庫回應</h3>
                        <div class="text-with-image reverse">
                            <!-- 圖像化圖示提示: 步驟2：送出後觀察回應 -->
                            <div class="text-part">
                                <p>接者Submit登入他，會發現登入失敗，並發現SQL語法長的如圖</p>
                            </div>
                            <div class="image-part">
                                <img src="https://hackmd.io/_uploads/HksmCu0mel.png" alt="步驟2：觀察資料庫回應" style="width: 90%; border: 1px solid #000000">
                            </div>
                        </div>
                    </div>
                    
                    <div id="writeup-step-3" class="writeup-step-content" style="display: none;">
                        <h3>步驟 3：輸入攻擊字串</h3>
                        <div class="text-with-image">
                            <div class="text-part">
                                <p>回到上一頁，在使用者名稱處輸入 admin 密碼輸入 <span class="code-text">' OR 1=1 -- -</span></p>
                            </div>
                            <!-- 圖像化圖示提示: 步驟3：利用聯合查詢獲取資料庫資訊 -->
                            <div class="image-part">
                                <img src="https://hackmd.io/_uploads/HJfMkKAXxe.png" alt="步驟 3：輸入攻擊字串" style="width: 90%; border: 1px solid #000000">
                            </div>
                        </div>
                        <!-- 範例區塊 -->
                        <div class="example-block">
                            <p>先用 <span class="code-block">'</span> 隔開查詢語法，再用 <span class="code-block">OR 1=1</span> 使條件永遠為真，最後用 <span class="code-block">-- -</span> 用於註解剩下雜亂的搜尋語法，以確保條件永遠為真且語法不會錯誤</p>
                        </div>
                    </div>

                    <div id="writeup-step-4" class="writeup-step-content" style="display: none;">
                        <h3>步驟 4：送出攻擊字串</h3>
                        <div class="text-with-image reverse">
                            <!-- 圖像化圖示提示: 步驟4：列舉資料庫的表格與欄位 -->
                            <div class="image-part">
                                <img src="https://hackmd.io/_uploads/SJNUetA7xl.png" alt="步驟 4：送出攻擊字串" style="width: 90%; border: 1px solid #000000">
                            </div>
                        </div>
                </div>

                <!-- 題目講解步驟導航按鈕 -->
                <div class="writeup-steps-nav">
                    <a href="#writeup-step-1" class="writeup-step-link active" data-step="1">1</a>
                    <a href="#writeup-step-2" class="writeup-step-link" data-step="2">2</a>
                    <a href="#writeup-step-3" class="writeup-step-link" data-step="3">3</a>
                    <a href="#writeup-step-4" class="writeup-step-link" data-step="4">4</a>
                </div>
            </section>

            <!-- 延伸閱讀頁面 (預設隱藏) -->
            <section id="further-reading-page-content" class="page-content" style="display: none;">
                <h2>延伸閱讀</h2>
                <div class="further-reading-grid">
                    <a href="#" class="link-box" target="_blank">
                        <h3>OWASP Top 10 - Injection</h3>
                        <p>了解 OWASP Top 10 中 Injection 攻擊的詳細內容，認識更多種類的注入攻擊。</p>
                    </a>
                    <a href="#" class="link-box" target="_blank">
                        <h3>PortSwigger - SQL Injection</h3>
                        <p>PortSwigger 是知名的資安工具開發商，其網站提供大量專業且深入的 SQL Injection 教學文章。</p>
                    </a>
                    <a href="#" class="link-box" target="_blank">
                        <h3>W3Schools - SQL Tutorial</h3>
                        <p>W3Schools 提供基礎的 SQL 語法教學，幫助您更深入理解 SQL 語言的運作。</p>
                    </a>
                    <a href="#" class="link-box" target="_blank">
                        <h3>MDN Web Docs - Web Security</h3>
                        <p>學習更多關於網頁安全的基礎知識，理解常見的網頁漏洞與防禦方法。</p>
                    </a>
                    <a href="#" class="link-box" target="_blank">
                        <h3>Hack The Box Academy - SQLi Module</h3>
                        <p>若想進階實作，Hack The Box Academy 提供互動式的 SQL Injection 練習模組。</p>
                    </a>
                    <a href="#" class="link-box" target="_blank">
                        <h3>從零開始學駭客 - SQL Injection</h3>
                        <p>台灣資安社群提供的中文教學資源，內容更貼近華人學習者習慣。</p>
                    </a>
                </div>
            </section>

            <!-- 頁面切換按鈕 (上/下頁) -->
            <div class="page-nav-buttons">
                <button class="page-nav-button" id="prev-page-button" aria-label="上一頁"><i class="fas fa-arrow-left"></i></button>
                <button class="page-nav-button" id="next-page-button" aria-label="下一頁"><i class="fas fa-arrow-right"></i></button>
            </div>
        </main>
    </div>

    <!-- 頁尾區塊 -->
    <footer class="footer">
        <p>Copyright©毛宇禾、賴永來、曾緯淳、李欣安</p>
        <p>臺北市數位實驗高級中等學校官網：<a href="https://tschool.tp.edu.tw/" target="_blank">https://tschool.tp.edu.tw/</a></p>
    </footer>

    <script>
        /*
         * JavaScript 腳本 - SQL Injection 教學素材
         * 作者：毛宇禾、賴永來、曾緯淳、李欣安 (臺北市數位實驗高中學生製作)
         * 描述：處理頁面導航、子分頁切換和 CTF 題目講解步驟切換的互動邏輯。
         *      新增 Cookie 功能以記憶使用者最後瀏覽的頁面。
         */

        document.addEventListener('DOMContentLoaded', () => {
            
            /**
             * 設置一個 Cookie。
             * @param {string} name - Cookie 的名稱。
             * @param {string} value - Cookie 的值。
             * @param {number} days - Cookie 的有效天數。
             */
            function setCookie(name, value, days) {
                let expires = "";
                if (days) {
                    const date = new Date();
                    date.setTime(date.getTime() + (days * 24 * 60 * 60 * 1000));
                    expires = "; expires=" + date.toUTCString();
                }
                document.cookie = name + "=" + (value || "") + expires + "; path=/";
            }

            /**
             * 獲取指定名稱的 Cookie 值。
             * @param {string} name - Cookie 的名稱。
             * @returns {string|null} Cookie 的值，如果不存在則返回 null。
             */
            function getCookie(name) {
                const nameEQ = name + "=";
                const ca = document.cookie.split(';');
                for (let i = 0; i < ca.length; i++) {
                    let c = ca[i];
                    while (c.charAt(0) == ' ') c = c.substring(1, c.length);
                    if (c.indexOf(nameEQ) == 0) return c.substring(nameEQ.length, c.length);
                }
                return null;
            }

            // 獲取所有導航連結、頁面內容區塊、子分頁連結、題目講解步驟連結及翻頁按鈕
            const navLinks = document.querySelectorAll('.nav-link');
            const pageContents = document.querySelectorAll('.page-content');
            const prevPageButton = document.getElementById('prev-page-button');
            const nextPageButton = document.getElementById('next-page-button');

            // 定義主頁面的顯示順序
            const pageOrder = ['home', 'introduction', 'types', 'applications', 'ctf-challenge', 'ctf-writeup', 'further-reading'];
            let currentPageIndex = 0; // 當前活動主頁面的索引

            /**
             * 顯示指定 ID 的主頁面內容。
             * @param {string} pageId - 要顯示的頁面 ID (例如: 'home', 'introduction')。
             */
            function showPage(pageId) {
                // 隱藏所有頁面內容
                pageContents.forEach(page => {
                    page.style.display = 'none';
                });

                // 顯示目標頁面
                const targetPage = document.getElementById(`${pageId}-page-content`);
                if (targetPage) {
                    targetPage.style.display = 'block';

                    // 確保頁面滾動到最上方，避免定位點混亂
                    document.querySelector('.main-content').scrollTop = 0;
                    document.documentElement.scrollTop = 0; // 也確保整個頁面滾動到頂部

                    // 更新導航欄的 active 樣式
                    navLinks.forEach(link => link.classList.remove('active'));
                    const activeNavLink = document.querySelector(`.nav-link[data-page="${pageId}"]`);
                    if (activeNavLink) {
                        activeNavLink.classList.add('active');
                    }

                    // 更新當前頁面索引
                    currentPageIndex = pageOrder.indexOf(pageId);
                    updatePaginationButtons(); // 更新翻頁按鈕狀態

                    // 對於包含子分頁的頁面 (介紹、種類、應用)，預設顯示第一個子分頁
                    if (['introduction', 'types', 'applications'].includes(pageId)) {
                        const firstSubTabLink = document.querySelector(`#${pageId}-page-content .sub-tab-link`);
                        if (firstSubTabLink) {
                            showSubTab(firstSubTabLink.dataset.subTab, pageId);
                        }
                    }
                    // 對於 CTF 題目講解頁面，預設顯示第一個步驟
                    if (pageId === 'ctf-writeup') {
                        const firstStepLink = document.querySelector(`#ctf-writeup-page-content .writeup-step-link`);
                        if (firstStepLink) {
                            showWriteupStep(firstStepLink.dataset.step);
                        }
                    }
                }
                // 將當前頁面 ID 存入 Cookie
                setCookie('lastPageId', pageId, 7);
            }

            /**
             * 顯示指定 ID 的子分頁內容。
             * @param {string} subTabId - 要顯示的子分頁 ID (例如: 'database-concept')。
             * @param {string} parentPageId - 子分頁所屬的主頁面 ID (例如: 'introduction')。
             */
            function showSubTab(subTabId, parentPageId) {
                const parentElement = document.getElementById(`${parentPageId}-page-content`);
                if (!parentElement) return;

                // 隱藏所有該主頁面下的子分頁內容
                parentElement.querySelectorAll('.sub-tab-content').forEach(content => {
                    content.style.display = 'none';
                });

                // 顯示目標子分頁內容
                const targetSubTab = document.getElementById(`${subTabId}-tab`);
                if (targetSubTab) {
                    targetSubTab.style.display = 'block';
                }

                // 更新子分頁導航連結的 active 樣式
                parentElement.querySelectorAll('.sub-tab-link').forEach(link => {
                    link.classList.remove('active');
                });
                const activeSubTabLink = parentElement.querySelector(`.sub-tab-link[data-sub-tab="${subTabId}"]`);
                if (activeSubTabLink) {
                    activeSubTabLink.classList.add('active');
                }
                // 將當前子分頁 ID 存入 Cookie (與父頁面綁定)
                setCookie('lastSubTabId_' + parentPageId, subTabId, 7);
            }

            /**
             * 顯示指定步驟的題目講解內容。
             * @param {string} stepNumber - 要顯示的步驟編號 (例如: '1', '2')。
             */
            function showWriteupStep(stepNumber) {
                const parentElement = document.getElementById('ctf-writeup-page-content');
                if (!parentElement) return;

                // 隱藏所有題目講解步驟內容
                parentElement.querySelectorAll('.writeup-step-content').forEach(content => {
                    content.style.display = 'none';
                });

                // 顯示目標步驟內容
                const targetStep = document.getElementById(`writeup-step-${stepNumber}`);
                if (targetStep) {
                    targetStep.style.display = 'block';
                }

                // 更新題目講解步驟連結的 active 樣式
                parentElement.querySelectorAll('.writeup-step-link').forEach(link => {
                    link.classList.remove('active');
                });
                const activeStepLink = parentElement.querySelector(`.writeup-step-link[data-step="${stepNumber}"]`);
                if (activeStepLink) {
                    activeStepLink.classList.add('active');
                }
                // 將當前步驟編號存入 Cookie
                setCookie('lastWriteupStep', stepNumber, 7);
            }

            /**
             * 更新翻頁按鈕 (上/下頁) 的啟用/禁用狀態。
             */
            function updatePaginationButtons() {
                if (currentPageIndex === 0) {
                    prevPageButton.classList.add('disabled');
                } else {
                    prevPageButton.classList.remove('disabled');
                }

                if (currentPageIndex === pageOrder.length - 1) {
                    nextPageButton.classList.add('disabled');
                } else {
                    nextPageButton.classList.remove('disabled');
                }
            }

            /* -- 事件監聽器 -- */

            // 主導航連結點擊事件
            navLinks.forEach(link => {
                link.addEventListener('click', (e) => {
                    e.preventDefault(); // 阻止默認跳轉行為
                    const pageId = link.dataset.page;
                    showPage(pageId);
                });
            });

            // 子分頁導航連結點擊事件 (使用事件委派簡化)
            document.querySelectorAll('.sub-tabs-nav').forEach(nav => {
                nav.addEventListener('click', (e) => {
                    if (e.target.classList.contains('sub-tab-link')) {
                        e.preventDefault();
                        const subTabId = e.target.dataset.subTab;
                        // 根據當前活動的主頁面索引來判斷所屬頁面
                        const parentPageId = pageOrder[currentPageIndex];
                        showSubTab(subTabId, parentPageId);
                    }
                });
            });

            // CTF 題目講解步驟連結點擊事件 (使用事件委派)
            const writeupStepsNav = document.querySelector('.writeup-steps-nav');
            if (writeupStepsNav) { // 檢查元素是否存在，避免錯誤
                writeupStepsNav.addEventListener('click', (e) => {
                    const link = e.target.closest('.writeup-step-link'); // 處理點擊到圖示的情況
                    if (link) {
                        e.preventDefault();
                        const stepNumber = link.dataset.step;
                        showWriteupStep(stepNumber);
                    }
                });
            }

            // 上一頁按鈕點擊事件
            prevPageButton.addEventListener('click', () => {
                if (currentPageIndex > 0) {
                    currentPageIndex--;
                    showPage(pageOrder[currentPageIndex]);
                }
            });

            // 下一頁按鈕點擊事件
            nextPageButton.addEventListener('click', () => {
                if (currentPageIndex < pageOrder.length - 1) {
                    currentPageIndex++;
                    showPage(pageOrder[currentPageIndex]);
                }
            });

            // 首頁「開始學習」按鈕的導航功能 (掛載到 window 方便 HTML 直接呼叫)
            window.navigateTo = function(pageId) {
                showPage(pageId);
            };

            // -- 頁面初始化與 Cookie 讀取 --
            const lastPageId = getCookie('lastPageId');
            const initialPageId = (lastPageId && pageOrder.includes(lastPageId)) ? lastPageId : 'home';
            
            // 顯示上次瀏覽的頁面或預設首頁
            showPage(initialPageId);

            // 如果頁面有子分頁，嘗試恢復上次瀏覽的子分頁
            if (['introduction', 'types', 'applications'].includes(initialPageId)) {
                const lastSubTabId = getCookie('lastSubTabId_' + initialPageId);
                if (lastSubTabId) {
                    const subTabElement = document.getElementById(`${lastSubTabId}-tab`);
                    if (subTabElement) {
                        showSubTab(lastSubTabId, initialPageId);
                    }
                }
            }

            // 如果是題目講解頁面，嘗試恢復上次瀏覽的步驟
            if (initialPageId === 'ctf-writeup') {
                const lastWriteupStep = getCookie('lastWriteupStep');
                if (lastWriteupStep) {
                    const stepElement = document.getElementById(`writeup-step-${lastWriteupStep}`);
                    if (stepElement) {
                        showWriteupStep(lastWriteupStep);
                    }
                }
            }
        });
    </script>
</body>
</html>